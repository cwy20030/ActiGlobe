<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Time-Shift • ActiGlobe</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Time-Shift">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ActiGlobe</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Circadian-Analysis.html">Circadian-Analysis</a>
    </li>
    <li>
      <a href="../articles/Graphic-Report.html">Graphic-Report</a>
    </li>
    <li>
      <a href="../articles/Time-Shift.html">Time-Shift</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cwy20030/ActiGlobe/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Time-Shift</h1>
            <h3 data-toc-skip class="subtitle">Pre-process Data Affected
by Daylight Saving and Travel-induced Time Shift</h3>
                        <h4 data-toc-skip class="author">C. William
Yao</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/cwy20030/ActiGlobe/blob/HEAD/vignettes/Time-Shift.Rmd" class="external-link"><code>vignettes/Time-Shift.Rmd</code></a></small>
      <div class="hidden name"><code>Time-Shift.Rmd</code></div>

    </div>

    
    
<style>
/* container that forces a fixed pixel width and enables scrolling */
.fullsize-scroll {
  width: 700px;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

/* prevent theme CSS from shrinking the image */
.fullsize-scroll img {
  width: 1200px !important;
  max-width: none !important;
  height: auto !important;
  display: block;
}

</style>
<div class="section level2">
<h2 id="what-will-be-covered-in-this-tutorial">What will be covered in this tutorial?<a class="anchor" aria-label="anchor" href="#what-will-be-covered-in-this-tutorial"></a>
</h2>
<p>This specific tutorial is designed specifically to show users how to
use ActiGlobe to preprocess longitudinal actigrpahy recordings affected
by time shift. For analysis and generation of graphic/excel report of
daily actigraphy measures, please go to tutorial title:
Graphic-Report.</p>
</div>
<div class="section level2">
<h2 id="load-the-libraries">Load the Libraries<a class="anchor" aria-label="anchor" href="#load-the-libraries"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cwy20030/ActiGlobe" class="external-link">ActiGlobe</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Optional Library</span></span>
<span><span class="co"># library(zeallot)</span></span></code></pre></div>
<p>If any of the packages has yet been installed, we can always install
them using the function [“install.packages()”].</p>
</div>
<div class="section level2">
<h2 id="load-example-data-flyeast">Load Example Data: FlyEast<a class="anchor" aria-label="anchor" href="#load-example-data-flyeast"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"FlyEast"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">FlyEast</span><span class="op">)</span> <span class="co">### Only the first few lines</span></span></code></pre></div>
<table class="table">
<caption>Table 1. An Overview of the FlyEast Dataset</caption>
<thead><tr class="header">
<th align="right">Activity</th>
<th align="left">X2</th>
<th align="right">Marker</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">11</td>
<td align="left">0.00</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">0.00</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">0.00</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">0.00</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">0</td>
<td align="left">0.00</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">0.00</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>For more information, type <code><a href="../reference/FlyEast.html">?FlyEast</a></code> or
<code><a href="../reference/FlyEast.html">help(FlyEast)</a></code> in your R console.</p>
<p>&lt; Tip for Beginner to R&gt; 1. Type: View(FlyEast) in the R
console will allow users to review the data structure of FlyEast. 2. Use
<b>Tab</b> button to help finish the code. Try typing: “Fly” in the
Console (i.e., the window where we can see a <code>&gt;</code>) then
press the button <b>Tab</b> on the keyboard.</p>
</div>
<div class="section level2">
<h2 id="step-0--create-a-brief-summary-of-the-recordings">Step 0. Create a brief summary of the recordings<a class="anchor" aria-label="anchor" href="#step-0--create-a-brief-summary-of-the-recordings"></a>
</h2>
<p>In general, when pre-processing or harmonizing large volumes of data,
it’s good practice to first generate a structured summary of the dataset
at hand.</p>
<p>Here, we use <code><a href="../reference/BriefSum.html">BriefSum()</a></code> to generate an initial summary
of the actigraphy data recorded in FlyEast. Based on the initial
recording time, it runs through the raw recording file to provide a
quick overview with simple summaries for each recording day and a newly
enriched actigraphy data. This pre-processing step also automatically
adds time-stamps to the original longitudinal recording. If the original
location inherits the practice of daylight saving,
<code><a href="../reference/BriefSum.html">BriefSum()</a></code> would also automatically handle any gain or loss
in time. By default, <code><a href="../reference/BriefSum.html">BriefSum()</a></code> would allow us to store
both the summary and the newly enriched recording data in a
data.list.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">BdfList</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/BriefSum.html">BriefSum</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="va">FlyEast</span>,</span>
<span>    SR <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">60</span>,</span>
<span>    Start <span class="op">=</span> <span class="st">"2017-10-24 13:45:00"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">BdfList</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="co">### An overview of the output structure from BriefSum()</span></span>
<span><span class="co">#&gt; List of 2</span></span>
<span><span class="co">#&gt;  $ Bdf:Classes 'ActiGlobe' and 'data.frame': 35 obs. of  13 variables:</span></span>
<span><span class="co">#&gt;  $ df :Classes 'ActiGlobe' and 'data.frame': 48847 obs. of  9 variables:</span></span></code></pre></div>
<p>We can also take the advantage of <code>zeallot</code> to store
multiple outputs at once just like in <code>Matlab</code> and
<code>Python</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">Bdf</span>, <span class="va">df</span><span class="op">)</span> <span class="op">%&lt;-%</span></span>
<span>  <span class="fu"><a href="../reference/BriefSum.html">BriefSum</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="va">FlyEast</span>,</span>
<span>    SR <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">60</span>,</span>
<span>    Start <span class="op">=</span> <span class="st">"2017-10-24 13:45:00"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>In the brief summary of daily recording, we would have thirteen
parameters including the information on the beginning and the end of
each daily recording period, labels warning the total time of a
recording is less than 24 hours and the presence of daylight saving time
(based on the initial time zone).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Bdf</span> <span class="op">&lt;-</span> <span class="va">BdfList</span><span class="op">$</span><span class="va">Bdf</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Bdf</span><span class="op">)</span></span></code></pre></div>
<style>
.fullsize-scroll { width:700px; text-align:center; }
.fullsize-scroll .image-title { display:inline-block; margin:8px 0; font-weight:400; font-size:14px; }
.fullsize-scroll img { width:700px; max-width:none; display:block; margin:0 auto; }
</style>
<div class="fullsize-scroll">
<h5 class="image-title">
Table 2 The Header of Bdf

<img src="images/Bdf_head.png" alt="Table 2 The Header of Bdf">
</h5>
</div>
<p>In the enriched data - <code>df</code>, we have both the original
data stored in <code>FlyEast</code> and some new information, such as
the time stamp of each data point.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">BdfList</span><span class="op">$</span><span class="va">df</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="co">### This should give us the same first few lines of FlyEast dataset with a few new columns created by [BrifSum()].</span></span></code></pre></div>
<table style="width:800px;" class="table">
<caption>
Table 3. BriefSum Enriched Longitudinal Recording
</caption>
<thead><tr>
<th style="text-align:right;">
Activity
</th>
<th style="text-align:left;">
X2
</th>
<th style="text-align:right;">
Marker
</th>
<th style="text-align:left;">
DateTime
</th>
<th style="text-align:left;">
Date
</th>
<th style="text-align:left;">
Time
</th>
<th style="text-align:left;">
UTC
</th>
<th style="text-align:left;">
DaylightSaving
</th>
<th style="text-align:right;">
nPoint
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
0.00
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
2017-10-24 13:45:00
</td>
<td style="text-align:left;">
2017-10-24
</td>
<td style="text-align:left;">
13:45:00
</td>
<td style="text-align:left;">
UTC-04:00
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0.00
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
2017-10-24 13:46:00
</td>
<td style="text-align:left;">
2017-10-24
</td>
<td style="text-align:left;">
13:46:00
</td>
<td style="text-align:left;">
UTC-04:00
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0.00
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
2017-10-24 13:47:00
</td>
<td style="text-align:left;">
2017-10-24
</td>
<td style="text-align:left;">
13:47:00
</td>
<td style="text-align:left;">
UTC-04:00
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0.00
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
2017-10-24 13:48:00
</td>
<td style="text-align:left;">
2017-10-24
</td>
<td style="text-align:left;">
13:48:00
</td>
<td style="text-align:left;">
UTC-04:00
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0.00
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
2017-10-24 13:49:00
</td>
<td style="text-align:left;">
2017-10-24
</td>
<td style="text-align:left;">
13:49:00
</td>
<td style="text-align:left;">
UTC-04:00
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
0.00
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
2017-10-24 13:50:00
</td>
<td style="text-align:left;">
2017-10-24
</td>
<td style="text-align:left;">
13:50:00
</td>
<td style="text-align:left;">
UTC-04:00
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
6
</td>
</tr>
</tbody>
</table>
<p>For longitudinal recordings that did not involve long-distance
traveling, we may simply stop here and move onto the estimating cosinor
parameters for further analysis. But given that <code>ActiGlobe</code>
was designed specifically to harmonize and correct recordings affected
by changes in the time zone. We have to go a few steps further to clean
our data.</p>
<div class="section level2">
<h2 id="step-1-look-into-a-travel-diary">Step 1: Look into a travel diary<a class="anchor" aria-label="anchor" href="#step-1-look-into-a-travel-diary"></a>
</h2>
<p>While users born after 2YK may not be familiar with concept of a
travel diary, it was relatively popular among young travelers to
document their journeys while traveling. These physical notebooks
generally come with item-wise spaces to jot down our trip itinerary,
including date, time and destination. This information is crucial to
properly sort out the recordings by day and correct the previously
created time stamps by <code>BriefSum</code> to match the
destination.</p>
<p>Fortunately, we already created something similar for this tutorial -
TLog. In the TLog, The <code>TLog</code> was created using the standard
travel diary template, which can be created using the function
<code><a href="../reference/TravelLog.html">TravelLog()</a></code>. For more information on the standard travel
diary, type <code><a href="../reference/TravelLog.html">?TravelLog</a></code> or <code><a href="../reference/TravelLog.html">help(TravelLog)</a></code> in
the R console.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">TLog</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">TLog</span><span class="op">)</span></span></code></pre></div>
<table style="width:800px;" class="table">
<caption>
Table 4. An Example of a Standard Travel Diary Template
</caption>
<thead><tr>
<th style="text-align:left;">
ID
</th>
<th style="text-align:left;">
UTC_Offset
</th>
<th style="text-align:left;">
Country_with_Daylight_Saving
</th>
<th style="text-align:left;">
date_Start
</th>
<th style="text-align:left;">
date_End
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Jane Doe
</td>
<td style="text-align:left;">
UTC -04:00
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
10/24/2017
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Jane Doe
</td>
<td style="text-align:left;">
UTC +08:00
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
11/2/2017
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Jane Doe
</td>
<td style="text-align:left;">
UTC +09:00
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:left;">
11/13/2017
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Jane Doe
</td>
<td style="text-align:left;">
UTC -04:00
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:left;">
11/20/2017
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<p>This simplified travel diary is essential for pre-processing
actigraphy data using <code>ActiGlobe</code>. The diary contains five
columns to help document the itinerary for each trip that the wearer
took. By default, the first row should contain the information about the
original location when the recording started. Here, one may notice our
intentional design of the template to record UTC_Offset by default,
instead of the actual geological location. This strategy aims to reduce
the level of intrusiveness that participants may feel when asked to
provide details of their trip. Since daylight saving is not always a
shared practice for all geological locations within the same time zone
or even the same country, it is important to add this information
because it can affect up to one hour in difference when correcting for
time stamps.</p>
<p>To facilitate the documentation of the travel log, we also include a
copy of the standard Internet Assigned Numbers Authority (IANA) time
table in ActiGlobe. We can simply use <code>View(IANA)</code> to pull up
the 2024 version of the time table.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">IANA</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">IANA</span><span class="op">)</span></span></code></pre></div>
<table style="width:800px;" class="table">
<caption>
Table 5. An Overview of the 2024 IANA Time Zone Database
</caption>
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
Country_Name
</th>
<th style="text-align:left;">
Country_Code
</th>
<th style="text-align:left;">
Timezone_IANA
</th>
<th style="text-align:left;">
TimeZone_Identifiers
</th>
<th style="text-align:left;">
TZ_Code
</th>
<th style="text-align:right;">
Offset
</th>
<th style="text-align:left;">
Observes_DST
</th>
<th style="text-align:left;">
Current_DST_Status
</th>
<th style="text-align:left;">
Current_Abbreviation
</th>
<th style="text-align:left;">
Current_Time_Zone_long_name
</th>
<th style="text-align:left;">
Current_Offset
</th>
<th style="text-align:left;">
Standard_Abbreviation
</th>
<th style="text-align:left;">
Standard_Time_Zone_long_name
</th>
<th style="text-align:left;">
Standard_Offset
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
Netherlands
</td>
<td style="text-align:left;">
NL
</td>
<td style="text-align:left;">
Europe/Amsterdam
</td>
<td style="text-align:left;">
Europe/Brussels,CET,Europe/Amsterdam,Europe/Luxembourg,MET
</td>
<td style="text-align:left;">
CEST
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
DST Active
</td>
<td style="text-align:left;">
CEST
</td>
<td style="text-align:left;">
Central European Summer Time
</td>
<td style="text-align:left;">
+02:00
</td>
<td style="text-align:left;">
CET
</td>
<td style="text-align:left;">
Central European Standard Time
</td>
<td style="text-align:left;">
+01:00
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
Denmark
</td>
<td style="text-align:left;">
DK
</td>
<td style="text-align:left;">
Europe/Copenhagen
</td>
<td style="text-align:left;">
Europe/Berlin,Arctic/Longyearbyen,Atlantic/Jan_Mayen,Europe/Copenhagen,Europe/Oslo,Europe/Stockholm
</td>
<td style="text-align:left;">
CEST
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
DST Active
</td>
<td style="text-align:left;">
CEST
</td>
<td style="text-align:left;">
Central European Summer Time
</td>
<td style="text-align:left;">
+02:00
</td>
<td style="text-align:left;">
CET
</td>
<td style="text-align:left;">
Central European Standard Time
</td>
<td style="text-align:left;">
+01:00
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
Switzerland
</td>
<td style="text-align:left;">
CH
</td>
<td style="text-align:left;">
Europe/Zurich
</td>
<td style="text-align:left;">
Europe/Zurich,Europe/Busingen,Europe/Vaduz
</td>
<td style="text-align:left;">
CEST
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
DST Active
</td>
<td style="text-align:left;">
CEST
</td>
<td style="text-align:left;">
Central European Summer Time
</td>
<td style="text-align:left;">
+02:00
</td>
<td style="text-align:left;">
CET
</td>
<td style="text-align:left;">
Central European Standard Time
</td>
<td style="text-align:left;">
+01:00
</td>
</tr>
<tr>
<td style="text-align:left;">
16
</td>
<td style="text-align:left;">
Canada
</td>
<td style="text-align:left;">
CA
</td>
<td style="text-align:left;">
America/Vancouver
</td>
<td style="text-align:left;">
America/Vancouver,Canada/Pacific
</td>
<td style="text-align:left;">
PDT
</td>
<td style="text-align:right;">
-7
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
DST Active
</td>
<td style="text-align:left;">
PDT
</td>
<td style="text-align:left;">
Pacific Daylight Time
</td>
<td style="text-align:left;">
-07:00
</td>
<td style="text-align:left;">
PST
</td>
<td style="text-align:left;">
Pacific Standard Time
</td>
<td style="text-align:left;">
-08:00
</td>
</tr>
<tr>
<td style="text-align:left;">
21
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
US
</td>
<td style="text-align:left;">
America/Chicago
</td>
<td style="text-align:left;">
America/Chicago,CST6CDT,US/Central
</td>
<td style="text-align:left;">
CDT
</td>
<td style="text-align:right;">
-5
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
DST Active
</td>
<td style="text-align:left;">
CDT
</td>
<td style="text-align:left;">
Central Daylight Time
</td>
<td style="text-align:left;">
-05:00
</td>
<td style="text-align:left;">
CST
</td>
<td style="text-align:left;">
Central Standard Time
</td>
<td style="text-align:left;">
-06:00
</td>
</tr>
<tr>
<td style="text-align:left;">
22
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:left;">
US
</td>
<td style="text-align:left;">
America/Los_Angeles
</td>
<td style="text-align:left;">
America/Los_Angeles,PST8PDT,US/Pacific
</td>
<td style="text-align:left;">
PDT
</td>
<td style="text-align:right;">
-7
</td>
<td style="text-align:left;">
Yes
</td>
<td style="text-align:left;">
DST Active
</td>
<td style="text-align:left;">
PDT
</td>
<td style="text-align:left;">
Pacific Daylight Time
</td>
<td style="text-align:left;">
-07:00
</td>
<td style="text-align:left;">
PST
</td>
<td style="text-align:left;">
Pacific Standard Time
</td>
<td style="text-align:left;">
-08:00
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="step-2-adjust-time-change-based-on-the-travel-diary">Step 2: Adjust time change based on the travel diary<a class="anchor" aria-label="anchor" href="#step-2-adjust-time-change-based-on-the-travel-diary"></a>
</h2>
<div class="section level3 scrollable">
<h3 class="scrollable" id="section"></h3>
<p>Before <code>ActiGlobe</code> directly modify information stored in
the enriched longitudinal recording - <code>df</code>, we will need to
adjust the brief summary stored in <code>Bdf</code>. This design allows
us to quickly scan through the summary file just in case any adjustment
is not properly addressed.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Bdf.adj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/TAdjust.html">TAdjust</a></span><span class="op">(</span><span class="va">Bdf</span>, <span class="va">TLog</span><span class="op">)</span></span></code></pre></div>
<p>When we put it side-by-side against the initial brief summary, we can
see clear changes in the various documentations about the recordings and
their annotations.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">Bdf</span><span class="op">[</span><span class="fl">10</span><span class="op">:</span><span class="fl">15</span>, <span class="op">]</span><span class="op">)</span> <span class="co">### Only display 6 days</span></span></code></pre></div>
<style>
.fullsize-scroll { width:700px; text-align:center; }
.fullsize-scroll .image-title { display:inline-block; margin:8px 0; font-weight:400; font-size:14px; }
.fullsize-scroll img { width:700px; max-width:none; display:block; margin:0 auto; }
</style>
<div class="fullsize-scroll">
<h5 class="image-title">
Table 6 Initial Brief Summary of the Recording

<img src="images/Bdf_demo.png" alt="Table 6 Initial Brief Summary of the Recording">
</h5>
</div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">Bdf.adj</span><span class="op">[</span><span class="fl">10</span><span class="op">:</span><span class="fl">15</span>, <span class="op">]</span><span class="op">)</span> <span class="co">### Only display 6 days</span></span></code></pre></div>
<style>
.fullsize-scroll { width:700px; text-align:center; }
.fullsize-scroll .image-title { display:inline-block; margin:8px 0; font-weight:400; font-size:14px; }
.fullsize-scroll img { width:700px; max-width:none; display:block; margin:0 auto; }
</style>
<div class="fullsize-scroll">
<h5 class="image-title">
Table 7. Adjusted Brief Summary of the Recording

<img src="images/Bdf.adj_demo.png" alt="Table 6 Initial Brief Summary of the Recording">
</h5>
</div>
<p>When we compare the overview of the longitudinal recording, we can
also see clear changes in the various documentations about the
recordings and their annotations</p>
<style>
.fullsize-scroll { width:700px; text-align:center; }
.fullsize-scroll .image-title { display:inline-block; margin:8px 0; font-weight:400; font-size:14px; }
.fullsize-scroll img { width:700px; max-width:none; display:block; margin:0 auto; }
</style>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggActiGlobe.html">ggActiGlobe</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">df</span>,</span>
<span>  Bdf <span class="op">=</span> <span class="va">Bdf</span>,</span>
<span>  VAct <span class="op">=</span> <span class="st">"Activity"</span>,</span>
<span>  VDT <span class="op">=</span> <span class="st">"DateTime"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="images/Unadjusted_Overview.png" width="800" alt="Figure 1. An Overview of Unadjusted Recording"><div class="figcaption">Figure 1. An Overview of Unadjusted
Recording</div>
</div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Reconstruct the longitudinal recording with proper segmentation</span></span>
<span><span class="va">dfList</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Act2Daily.html">Act2Daily</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">df</span>,</span>
<span>  Bdf <span class="op">=</span> <span class="va">Bdf.adj</span>,</span>
<span>  VAct <span class="op">=</span> <span class="st">"Activity"</span>,</span>
<span>  VTm <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>  Incomplete <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  Travel <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">dfList</span><span class="op">$</span><span class="va">Daily_df</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ggActiGlobe.html">ggActiGlobe</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="va">df2</span>,</span>
<span>  Bdf <span class="op">=</span> <span class="va">Bdf.adj</span>,</span>
<span>  VAct <span class="op">=</span> <span class="st">"Activity"</span>,</span>
<span>  VDT <span class="op">=</span> <span class="st">"DateTime"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="images/Adjusted_Overview.png" width="800" alt="Figure 1. An Overview of Adjusted Recording"><div class="figcaption">Figure 1. An Overview of Adjusted
Recording</div>
</div>
<p>We can also use the following code to look at each daily recording
separately. Note that the code below was intentionally left without
generating any output plot to avoid overcrowding this tutorial.</p>
<ol style="list-style-type: decimal">
<li>Unadjusted Original Recording</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">Bdf</span><span class="op">$</span><span class="va">Cumulative_Start_Second</span></span>
<span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="va">Bdf</span><span class="op">$</span><span class="va">Cumulative_End_Second</span></span>
<span>  <span class="va">GX</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">$</span><span class="va">Activity</span><span class="op">[</span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">:</span><span class="va">y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="fl">60</span><span class="op">]</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">GX</span>, main <span class="op">=</span> <span class="va">i</span>, font.lab <span class="op">=</span> <span class="fl">2</span>, ylab <span class="op">=</span> <span class="st">"Activity (counts)"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Time-shift Adjusted Recording</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_alonglength</span>(x))<span class="er">)</span> {</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  x <span class="ot">&lt;-</span> Bdf.adj<span class="sc">$</span>Cumulative_Start_Second</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>  y <span class="ot">&lt;-</span> Bdf.adj<span class="sc">$</span>Cumulative_End_Second</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>  GX <span class="ot">&lt;-</span> df<span class="sc">$</span>Activity[(x[i]<span class="sc">:</span>y[i]) <span class="sc">/</span> <span class="dv">60</span>]</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">plot</span>(GX, <span class="at">main =</span> i, <span class="at">font.lab =</span> <span class="dv">2</span>, <span class="at">ylab =</span> <span class="st">"Activity (counts)"</span>))</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>}</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Time-shift Adjusted Recording</li>
</ol>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dfList</span><span class="op">$</span><span class="va">Daily_df</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dfList</span><span class="op">$</span><span class="va">Daily_df</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">Activity</span>, main <span class="op">=</span> <span class="va">i</span>, font.lab <span class="op">=</span> <span class="fl">2</span>, ylab <span class="op">=</span> <span class="st">"Activity (counts)"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>See the next tutorial for how to segment/export recordings by day and
how to generate graphic report.</p>
</div>
</div>
</div>
</div>
</div>
</div>
  

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>





      <footer><div class="copyright">
  <p></p>
<p>Developed by C. William Yao, Giorgio Varesco, François Bieuzen, Guido Simonelli.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</body>
</html>
