<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Advanced Data Harmonization • ActiGlobe</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Advanced Data Harmonization">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ActiGlobe</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Tutorial_02.html">Advanced Data Harmonization</a></li>
    <li><a class="dropdown-item" href="../articles/Tutorial_03.html">Data Extraction and Graphic Report</a></li>
    <li><a class="dropdown-item" href="../articles/Tutorial_04.html">Analysis</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cwy20030/ActiGlobe/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Advanced Data Harmonization</h1>
            <h3 data-toc-skip class="subtitle">Stream Lining
Pre-processing from Daylight Saving to Travel-induced Time Shift</h3>
                        <h4 data-toc-skip class="author">C. William
Yao</h4>
            
            <h4 data-toc-skip class="date">2025-10-29</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/cwy20030/ActiGlobe/blob/HEAD/vignettes/Tutorial_02.Rmd" class="external-link"><code>vignettes/Tutorial_02.Rmd</code></a></small>
      <div class="d-none name"><code>Tutorial_02.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="what-will-be-covered-in-this-tutorial">What will be covered in this tutorial?<a class="anchor" aria-label="anchor" href="#what-will-be-covered-in-this-tutorial"></a>
</h2>
<p>This specific tutorial is designed specifically to show users how to
use ActiGlobe to preprocess longitudinal actigrpahy recordings affected
by time shift. For analysis and generation of graphic/excel report of
daily actigraphy measures, please go to other</p>
</div>
<div class="section level2">
<h2 id="load-the-libraries">Load the Libraries<a class="anchor" aria-label="anchor" href="#load-the-libraries"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cwy20030/ActiGlobe" class="external-link">ActiGlobe</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">### Optional Library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-lib/zeallot" class="external-link">zeallot</a></span><span class="op">)</span></span></code></pre></div>
<p>If any of the packages has yet been installed, we can always install
them using the function [“install.packages()”].</p>
</div>
<div class="section level2">
<h2 id="load-example-data-flyeast">Load Example Data: FlyEast<a class="anchor" aria-label="anchor" href="#load-example-data-flyeast"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"FlyEast"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">FlyEast</span><span class="op">)</span>   <span class="co">### Only the first few lines</span></span>
<span><span class="co">#&gt;   Activity   X2 Marker</span></span>
<span><span class="co">#&gt; 1       11 0.00      0</span></span>
<span><span class="co">#&gt; 2        0 0.00      0</span></span>
<span><span class="co">#&gt; 3        0 0.00      0</span></span>
<span><span class="co">#&gt; 4        0 0.00      0</span></span>
<span><span class="co">#&gt; 5        0 0.00      0</span></span>
<span><span class="co">#&gt; 6        0 0.00      0</span></span></code></pre></div>
<p>For more information, type <code><a href="../reference/FlyEast.html">?FlyEast</a></code> or
<code><a href="../reference/FlyEast.html">help(FlyEast)</a></code> in your R console.</p>
<p>&lt; Tip for Beginner to R&gt; Type: View(FlyEast) in the R console
will allow users to review the data structure of FlyEast.</p>
</div>
<div class="section level2">
<h2 id="step-0--create-a-brief-summary-of-the-recordings">Step 0. Create a brief summary of the recordings<a class="anchor" aria-label="anchor" href="#step-0--create-a-brief-summary-of-the-recordings"></a>
</h2>
<p>In general, when pre-processing or harmonizing large volumes of data,
it’s good practice to first generate a structured summary of the dataset
at hand.</p>
<p>Here, we use <code><a href="../reference/BriefSum.html">BriefSum()</a></code> to generate an initial summary
of the actigraphy data recorded in FlyEast. Based on the initial
recording time, it runs through the raw recording file to provide a
quick overview with simple summaries for each recording day and a newly
enriched actigraphy data. This pre-processing step also automatically
adds time-stamps to the original longitudinal recording. If the original
location inherits the practice of daylight saving,
<code><a href="../reference/BriefSum.html">BriefSum()</a></code> would also automatically handle any gain or loss
in time. By default, <code><a href="../reference/BriefSum.html">BriefSum()</a></code> would allow us to store
both the summary and the newly enriched recording data in a
data.list.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">BdfList</span> <span class="op">=</span> </span>
<span><span class="fu"><a href="../reference/BriefSum.html">BriefSum</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">FlyEast</span>,</span>
<span>         SR <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">60</span>,</span>
<span>         Start <span class="op">=</span> <span class="st">"2017-10-24 13:45:00"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">BdfList</span>,max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="co">### An overview of the output structure from BriefSum()</span></span>
<span><span class="co">#&gt; List of 2</span></span>
<span><span class="co">#&gt;  $ Bdf:Classes 'ActiGlobe' and 'data.frame': 35 obs. of  13 variables:</span></span>
<span><span class="co">#&gt;  $ df :Classes 'ActiGlobe' and 'data.frame': 48847 obs. of  9 variables:</span></span></code></pre></div>
<p>We can also take the advantage of <code>zeallot</code> to store
multiple outputs at once just like in <code>Matlab</code> and
<code>Python</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">Bdf</span>, <span class="va">df</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/zeallot/man/operator.html" class="external-link">%&lt;-%</a></span></span>
<span><span class="fu"><a href="../reference/BriefSum.html">BriefSum</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">FlyEast</span>,</span>
<span>         SR <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">60</span>,</span>
<span>         Start <span class="op">=</span> <span class="st">"2017-10-24 13:45:00"</span><span class="op">)</span></span></code></pre></div>
<p>In the brief summary of daily recording, we would have thirteen
parameters including the information on the beginning and the end of
each daily recording period, labels warning the total time of a
recording is less than 24 hours and the presence of daylight saving time
(based on the initial time zone).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Bdf</span> <span class="op">&lt;-</span> <span class="va">BdfList</span><span class="op">$</span><span class="va">Bdf</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Bdf</span><span class="op">)</span></span>
<span><span class="co">#&gt;         Date Epoch       UTC TZ_code Daylight_Saving Recording_Start</span></span>
<span><span class="co">#&gt; 1 2017-10-24    60 UTC-04:00     EDT            TRUE        13:45:00</span></span>
<span><span class="co">#&gt; 2 2017-10-25    60 UTC-04:00     EDT            TRUE        00:00:00</span></span>
<span><span class="co">#&gt; 3 2017-10-26    60 UTC-04:00     EDT            TRUE        00:00:00</span></span>
<span><span class="co">#&gt; 4 2017-10-27    60 UTC-04:00     EDT            TRUE        00:00:00</span></span>
<span><span class="co">#&gt; 5 2017-10-28    60 UTC-04:00     EDT            TRUE        00:00:00</span></span>
<span><span class="co">#&gt; 6 2017-10-29    60 UTC-04:00     EDT            TRUE        00:00:00</span></span>
<span><span class="co">#&gt;   Recording_End GL_Offset nDataPoints Cumulative_Start_Second</span></span>
<span><span class="co">#&gt; 1      23:59:00         0         615                      60</span></span>
<span><span class="co">#&gt; 2      23:59:00         0        1440                   36960</span></span>
<span><span class="co">#&gt; 3      23:59:00         0        1440                  123360</span></span>
<span><span class="co">#&gt; 4      23:59:00         0        1440                  209760</span></span>
<span><span class="co">#&gt; 5      23:59:00         0        1440                  296160</span></span>
<span><span class="co">#&gt; 6      23:59:00         0        1440                  382560</span></span>
<span><span class="co">#&gt;   Cumulative_End_Second Excluded              Warning</span></span>
<span><span class="co">#&gt; 1                 36900     TRUE Incomplete Recording</span></span>
<span><span class="co">#&gt; 2                123300    FALSE                     </span></span>
<span><span class="co">#&gt; 3                209700    FALSE                     </span></span>
<span><span class="co">#&gt; 4                296100    FALSE                     </span></span>
<span><span class="co">#&gt; 5                382500    FALSE                     </span></span>
<span><span class="co">#&gt; 6                468900    FALSE</span></span></code></pre></div>
<p>In the enriched data - <code>df</code>, we have both the original
data stored in <code>FlyEast</code> and some new information, such as
the time stamp of each data point.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">BdfList</span><span class="op">$</span><span class="va">df</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="co">### This should give us the same first few lines of FlyEast dataset with a few new columns created by [BrifSum()].</span></span>
<span><span class="co">#&gt;   Activity   X2 Marker            DateTime       Date     Time       UTC</span></span>
<span><span class="co">#&gt; 1       11 0.00      0 2017-10-24 13:45:00 2017-10-24 13:45:00 UTC-04:00</span></span>
<span><span class="co">#&gt; 2        0 0.00      0 2017-10-24 13:46:00 2017-10-24 13:46:00 UTC-04:00</span></span>
<span><span class="co">#&gt; 3        0 0.00      0 2017-10-24 13:47:00 2017-10-24 13:47:00 UTC-04:00</span></span>
<span><span class="co">#&gt; 4        0 0.00      0 2017-10-24 13:48:00 2017-10-24 13:48:00 UTC-04:00</span></span>
<span><span class="co">#&gt; 5        0 0.00      0 2017-10-24 13:49:00 2017-10-24 13:49:00 UTC-04:00</span></span>
<span><span class="co">#&gt; 6        0 0.00      0 2017-10-24 13:50:00 2017-10-24 13:50:00 UTC-04:00</span></span>
<span><span class="co">#&gt;   DaylightSaving nPoint</span></span>
<span><span class="co">#&gt; 1           TRUE      1</span></span>
<span><span class="co">#&gt; 2           TRUE      2</span></span>
<span><span class="co">#&gt; 3           TRUE      3</span></span>
<span><span class="co">#&gt; 4           TRUE      4</span></span>
<span><span class="co">#&gt; 5           TRUE      5</span></span>
<span><span class="co">#&gt; 6           TRUE      6</span></span></code></pre></div>
<p>For longitudinal recordings that did not involve long-distance
traveling, we may simply stop here and move onto the estimating cosinor
parameters for further analysis. But given that <code>ActiGlobe</code>
was designed specifically to harmonize and correct recordings affected
by changes in the time zone. We have to go a few steps further to clean
our data.</p>
</div>
<div class="section level2">
<h2 id="step-1-look-into-a-travel-diary">Step 1: Look into a travel diary<a class="anchor" aria-label="anchor" href="#step-1-look-into-a-travel-diary"></a>
</h2>
<p>While users born after 2YK may not be familiar with concept of a
travel diary, it was relatively popular among young travelers to
document their journeys while traveling. These physical notebooks
generally come with item-wise spaces to jot down our trip itinerary,
including date, time and destination. This information is crucial to
properly sort out the recordings by day and correct the previously
created time stamps by <code>BriefSum</code> to match the
destination.</p>
<p>Fortunately, we already created something similar for this tutorial -
TLog. In the TLog, The <code>TLog</code> was created using the standard
travel diary template, which can be created using the function
<code><a href="../reference/TravelLog.html">TravelLog()</a></code>. For more information on the standard travel
diary, type <code><a href="../reference/TravelLog.html">?TravelLog</a></code> or <code><a href="../reference/TravelLog.html">help(TravelLog)</a></code> in
the R console.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">TLog</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">TLog</span><span class="op">)</span></span>
<span><span class="co">#&gt;         ID UTC_Offset Country_with_Daylight_Saving date_Start date_End</span></span>
<span><span class="co">#&gt; 1 Jane Doe UTC -04:00                         TRUE 10/24/2017       NA</span></span>
<span><span class="co">#&gt; 2 Jane Doe UTC +08:00                        FALSE  11/2/2017       NA</span></span>
<span><span class="co">#&gt; 3 Jane Doe UTC +09:00                        FALSE 11/13/2017       NA</span></span>
<span><span class="co">#&gt; 4 Jane Doe UTC -04:00                         TRUE 11/20/2017       NA</span></span></code></pre></div>
<p>This simplified travel diary is essential for pre-processing
actigraphy data using <code>ActiGlobe</code>. The diary contains five
columns to help document the itinerary for each trip that the wearer
took. By default, the first row should contain the information about the
original location when the recording started. Here, one may notice our
intentional design of the template to record UTC_Offset by default,
instead of the actual geological location. This strategy aims to reduce
the level of intrusiveness that participants may feel when asked to
provide details of their trip. Since daylight saving is not always a
shared practice for all geological locations within the same time zone
or even the same country, it is important to add this information
because it can affect up to one hour in difference when correcting for
time stamps.</p>
<p>To facilitate the documentation of the travel log, we also include a
copy of the standard Internet Assigned Numbers Authority (IANA) time
table in ActiGlobe. We can simply use <code>View(IANA)</code> to pull up
the 2024 version of the time table.</p>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 10</span></span></span>
<span><span class="co">#&gt;   `Country code(s)`    `TZ identifier` `Embedded comments` Type  Daylight_Saving</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> CI, BF, GH, GM, GN,… Africa/Abidjan  <span style="color: #BB0000;">NA</span>                  Cano…               1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> GH                   Africa/Accra    <span style="color: #BB0000;">NA</span>                  Link                1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ET                   Africa/Addis_A… <span style="color: #BB0000;">NA</span>                  Link                1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> DZ                   Africa/Algiers  <span style="color: #BB0000;">NA</span>                  Cano…               1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ER                   Africa/Asmara   <span style="color: #BB0000;">NA</span>                  Link                1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ER                   Africa/Asmera   <span style="color: #BB0000;">NA</span>                  Link                1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: UTC_Offset_STD &lt;chr&gt;, Time_Zone_STD &lt;chr&gt;, Source &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Notes &lt;chr&gt;, HourOffset_STD &lt;dbl&gt;</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="step-2-adjust-time-change-based-on-the-travel-diary">Step 2: Adjust time change based on the travel diary<a class="anchor" aria-label="anchor" href="#step-2-adjust-time-change-based-on-the-travel-diary"></a>
</h2>
<p>Before <code>ActiGlobe</code> directly modify information stored in
the enriched longitudinal recording - <code>df</code>, we will need to
adjust the brief summary stored in <code>Bdf</code>. This design allows
us to quickly scan through the summary file just in case any adjustment
is not properly addressed.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Bdf.adj</span> <span class="op">=</span> <span class="fu"><a href="../reference/TAdjust.html">TAdjust</a></span><span class="op">(</span><span class="va">Bdf</span>, <span class="va">TLog</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">Bdf.adj</span><span class="op">)</span></span>
<span><span class="co">#&gt;         Date Epoch       UTC          TZ_code Daylight_Saving Recording_Start</span></span>
<span><span class="co">#&gt; 1 2017-10-24    60 UTC-04:00 America/Anguilla            TRUE        13:45:00</span></span>
<span><span class="co">#&gt; 2 2017-10-25    60 UTC-04:00 America/Anguilla            TRUE        00:00:00</span></span>
<span><span class="co">#&gt; 3 2017-10-26    60 UTC-04:00 America/Anguilla            TRUE        00:00:00</span></span>
<span><span class="co">#&gt; 4 2017-10-27    60 UTC-04:00 America/Anguilla            TRUE        00:00:00</span></span>
<span><span class="co">#&gt; 5 2017-10-28    60 UTC-04:00 America/Anguilla            TRUE        00:00:00</span></span>
<span><span class="co">#&gt; 6 2017-10-29    60 UTC-04:00 America/Anguilla            TRUE        00:00:00</span></span>
<span><span class="co">#&gt;   Recording_End GL_Offset nDataPoints Cumulative_Start_Second</span></span>
<span><span class="co">#&gt; 1      23:59:00         0         615                      60</span></span>
<span><span class="co">#&gt; 2      23:59:00         0        1440                   36960</span></span>
<span><span class="co">#&gt; 3      23:59:00         0        1440                  123360</span></span>
<span><span class="co">#&gt; 4      23:59:00         0        1440                  209760</span></span>
<span><span class="co">#&gt; 5      23:59:00         0        1440                  296160</span></span>
<span><span class="co">#&gt; 6      23:59:00         0        1440                  382560</span></span>
<span><span class="co">#&gt;   Cumulative_End_Second Excluded              Warning Recording_Period</span></span>
<span><span class="co">#&gt; 1                 36900     TRUE Incomplete Recording                1</span></span>
<span><span class="co">#&gt; 2                123300    FALSE                                     1</span></span>
<span><span class="co">#&gt; 3                209700    FALSE                                     1</span></span>
<span><span class="co">#&gt; 4                296100    FALSE                                     1</span></span>
<span><span class="co">#&gt; 5                382500    FALSE                                     1</span></span>
<span><span class="co">#&gt; 6                468900    FALSE                                     1</span></span>
<span><span class="co">#&gt;   Hour_Adjusted</span></span>
<span><span class="co">#&gt; 1             0</span></span>
<span><span class="co">#&gt; 2             0</span></span>
<span><span class="co">#&gt; 3             0</span></span>
<span><span class="co">#&gt; 4             0</span></span>
<span><span class="co">#&gt; 5             0</span></span>
<span><span class="co">#&gt; 6             0</span></span></code></pre></div>
</div>
<div class="section level2 scrollable">
<h2 class="scrollable" id="section"></h2>
<p>When we put it side-by-side against the initial brief summary, we can
see clear changes in the various documentations about the recordings and
their annotations.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">Bdf</span><span class="op">[</span><span class="fl">10</span><span class="op">:</span><span class="fl">15</span>,<span class="op">]</span><span class="op">)</span> <span class="co">### Only display 6 days </span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="1%">
<col width="6%">
<col width="3%">
<col width="5%">
<col width="4%">
<col width="9%">
<col width="9%">
<col width="8%">
<col width="5%">
<col width="6%">
<col width="13%">
<col width="12%">
<col width="5%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">Date</th>
<th align="right">Epoch</th>
<th align="left">UTC</th>
<th align="left">TZ_code</th>
<th align="left">Daylight_Saving</th>
<th align="left">Recording_Start</th>
<th align="left">Recording_End</th>
<th align="right">GL_Offset</th>
<th align="right">nDataPoints</th>
<th align="right">Cumulative_Start_Second</th>
<th align="right">Cumulative_End_Second</th>
<th align="left">Excluded</th>
<th align="left">Warning</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">10</td>
<td align="left">2017-11-02</td>
<td align="right">60</td>
<td align="left">UTC-04:00</td>
<td align="left">EDT</td>
<td align="left">TRUE</td>
<td align="left">00:00:00</td>
<td align="left">23:59:00</td>
<td align="right">0</td>
<td align="right">1440</td>
<td align="right">728160</td>
<td align="right">814500</td>
<td align="left">FALSE</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">11</td>
<td align="left">2017-11-03</td>
<td align="right">60</td>
<td align="left">UTC-04:00</td>
<td align="left">EDT</td>
<td align="left">TRUE</td>
<td align="left">00:00:00</td>
<td align="left">23:59:00</td>
<td align="right">0</td>
<td align="right">1440</td>
<td align="right">814560</td>
<td align="right">900900</td>
<td align="left">FALSE</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">12</td>
<td align="left">2017-11-04</td>
<td align="right">60</td>
<td align="left">UTC-04:00</td>
<td align="left">EDT</td>
<td align="left">TRUE</td>
<td align="left">00:00:00</td>
<td align="left">23:59:00</td>
<td align="right">0</td>
<td align="right">1440</td>
<td align="right">900960</td>
<td align="right">987300</td>
<td align="left">FALSE</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">13</td>
<td align="left">2017-11-05</td>
<td align="right">60</td>
<td align="left">UTC-05:00</td>
<td align="left">EST</td>
<td align="left">FALSE</td>
<td align="left">00:00:00</td>
<td align="left">23:59:00</td>
<td align="right">1</td>
<td align="right">1500</td>
<td align="right">987360</td>
<td align="right">1077300</td>
<td align="left">TRUE</td>
<td align="left">Time Change</td>
</tr>
<tr class="odd">
<td align="left">14</td>
<td align="left">2017-11-06</td>
<td align="right">60</td>
<td align="left">UTC-05:00</td>
<td align="left">EST</td>
<td align="left">FALSE</td>
<td align="left">00:00:00</td>
<td align="left">23:59:00</td>
<td align="right">0</td>
<td align="right">1440</td>
<td align="right">1077360</td>
<td align="right">1163700</td>
<td align="left">FALSE</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">15</td>
<td align="left">2017-11-07</td>
<td align="right">60</td>
<td align="left">UTC-05:00</td>
<td align="left">EST</td>
<td align="left">FALSE</td>
<td align="left">00:00:00</td>
<td align="left">23:59:00</td>
<td align="right">0</td>
<td align="right">1440</td>
<td align="right">1163760</td>
<td align="right">1250100</td>
<td align="left">FALSE</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">Bdf.adj</span><span class="op">[</span><span class="fl">10</span><span class="op">:</span><span class="fl">15</span>,<span class="op">]</span><span class="op">)</span> <span class="co">### Only display 6 days </span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="1%">
<col width="5%">
<col width="2%">
<col width="4%">
<col width="5%">
<col width="7%">
<col width="7%">
<col width="6%">
<col width="4%">
<col width="5%">
<col width="11%">
<col width="10%">
<col width="4%">
<col width="5%">
<col width="8%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="left">Date</th>
<th align="right">Epoch</th>
<th align="left">UTC</th>
<th align="left">TZ_code</th>
<th align="left">Daylight_Saving</th>
<th align="left">Recording_Start</th>
<th align="left">Recording_End</th>
<th align="right">GL_Offset</th>
<th align="right">nDataPoints</th>
<th align="right">Cumulative_Start_Second</th>
<th align="right">Cumulative_End_Second</th>
<th align="left">Excluded</th>
<th align="left">Warning</th>
<th align="right">Recording_Period</th>
<th align="right">Hour_Adjusted</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">10</td>
<td align="left">2017-11-02</td>
<td align="right">60</td>
<td align="left">UTC+08:00</td>
<td align="left">Asia/Brunei</td>
<td align="left">FALSE</td>
<td align="left">00:00:00</td>
<td align="left">23:59:00</td>
<td align="right">0</td>
<td align="right">1440</td>
<td align="right">771360</td>
<td align="right">857700</td>
<td align="left">TRUE</td>
<td align="left">Travel Day</td>
<td align="right">2</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">11</td>
<td align="left">2017-11-03</td>
<td align="right">60</td>
<td align="left">UTC+08:00</td>
<td align="left">Asia/Brunei</td>
<td align="left">FALSE</td>
<td align="left">00:00:00</td>
<td align="left">23:59:00</td>
<td align="right">0</td>
<td align="right">1440</td>
<td align="right">857760</td>
<td align="right">944100</td>
<td align="left">FALSE</td>
<td align="left"></td>
<td align="right">2</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">12</td>
<td align="left">2017-11-04</td>
<td align="right">60</td>
<td align="left">UTC+08:00</td>
<td align="left">Asia/Brunei</td>
<td align="left">FALSE</td>
<td align="left">00:00:00</td>
<td align="left">23:59:00</td>
<td align="right">0</td>
<td align="right">1440</td>
<td align="right">944160</td>
<td align="right">1030500</td>
<td align="left">FALSE</td>
<td align="left"></td>
<td align="right">2</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">13</td>
<td align="left">2017-11-05</td>
<td align="right">60</td>
<td align="left">UTC+08:00</td>
<td align="left">Asia/Brunei</td>
<td align="left">FALSE</td>
<td align="left">00:00:00</td>
<td align="left">23:59:00</td>
<td align="right">0</td>
<td align="right">1440</td>
<td align="right">1030560</td>
<td align="right">1116900</td>
<td align="left">FALSE</td>
<td align="left"></td>
<td align="right">2</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">14</td>
<td align="left">2017-11-06</td>
<td align="right">60</td>
<td align="left">UTC+08:00</td>
<td align="left">Asia/Brunei</td>
<td align="left">FALSE</td>
<td align="left">00:00:00</td>
<td align="left">23:59:00</td>
<td align="right">0</td>
<td align="right">1440</td>
<td align="right">1116960</td>
<td align="right">1203300</td>
<td align="left">FALSE</td>
<td align="left"></td>
<td align="right">2</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">15</td>
<td align="left">2017-11-07</td>
<td align="right">60</td>
<td align="left">UTC+08:00</td>
<td align="left">Asia/Brunei</td>
<td align="left">FALSE</td>
<td align="left">00:00:00</td>
<td align="left">23:59:00</td>
<td align="right">0</td>
<td align="right">1440</td>
<td align="right">1203360</td>
<td align="right">1289700</td>
<td align="left">FALSE</td>
<td align="left"></td>
<td align="right">2</td>
<td align="right">12</td>
</tr>
</tbody>
</table>
<div class="section level3 scrollable">
<h3 class="scrollable" id="section-1"></h3>
<p>When we put it side-by-side against the initial brief summary, we can
see clear changes in the various documentations about the recordings and
their annotations</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ggActiGlobe.html">ggActiGlobe</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">df</span>, </span>
<span>            Bdf <span class="op">=</span> <span class="va">Bdf</span>,</span>
<span>            VAct <span class="op">=</span> <span class="st">"Activity"</span>,</span>
<span>            VDT <span class="op">=</span> <span class="st">"DateTime"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial_02_files/figure-html/Original_Data-1.png" alt="Original Recording without Adjustment for Time Shift"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### Reconstruct the longitudinal recording with proper segmentation</span></span>
<span><span class="va">dfList</span> <span class="op">=</span> <span class="fu"><a href="../reference/Act2Daily.html">Act2Daily</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">df</span>,</span>
<span>                   Bdf <span class="op">=</span> <span class="va">Bdf.adj</span>,</span>
<span>                   VAct <span class="op">=</span> <span class="st">"Activity"</span>,</span>
<span>                   VTm <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>                   Incomplete <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                   Travel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">dfList</span><span class="op">$</span><span class="va">Daily_df</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ggActiGlobe.html">ggActiGlobe</a></span><span class="op">(</span>df <span class="op">=</span> <span class="va">df2</span>, </span>
<span>            Bdf <span class="op">=</span> <span class="va">Bdf.adj</span>,</span>
<span>            VAct <span class="op">=</span> <span class="st">"Activity"</span>,</span>
<span>            VDT <span class="op">=</span> <span class="st">"DateTime"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial_02_files/figure-html/Pre_processed_Data-1.png" alt="Recording Adjusted for Time Shift using ActiGlobe"></p>
<p>We can also use the following code to look at each daily recording
separately. Note that the code below was intentionally left without
generating any output plot to avoid overcrowding this tutorial.</p>
<ol style="list-style-type: decimal">
<li>Unadjusted Original Recording</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span><span class="co">#### Extract the recording period    </span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">Bdf</span><span class="op">$</span><span class="va">Cumulative_Start_Second</span>  </span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">Bdf</span><span class="op">$</span><span class="va">Cumulative_End_Second</span>  </span>
<span><span class="va">GX</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">$</span><span class="va">Activity</span><span class="op">[</span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">:</span><span class="va">y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">/</span><span class="fl">60</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">GX</span>,</span>
<span>           main <span class="op">=</span> <span class="va">i</span>, </span>
<span>           font.lab <span class="op">=</span> <span class="fl">2</span>,</span>
<span>           ylab <span class="op">=</span> <span class="st">"Activity (counts)"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Time-shift Adjusted Recording</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span><span class="co">#### Extract the recording period  </span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">Bdf.adj</span><span class="op">$</span><span class="va">Cumulative_Start_Second</span>  </span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">Bdf.adj</span><span class="op">$</span><span class="va">Cumulative_End_Second</span>  </span>
<span></span>
<span><span class="va">GX</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">$</span><span class="va">Activity</span><span class="op">[</span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">:</span><span class="va">y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">/</span><span class="fl">60</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">GX</span>,</span>
<span>           main <span class="op">=</span> <span class="va">i</span>, </span>
<span>           font.lab <span class="op">=</span> <span class="fl">2</span>,</span>
<span>           ylab <span class="op">=</span> <span class="st">"Activity (counts)"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Time-shift Adjusted Recording</li>
</ol>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dfList</span><span class="op">$</span><span class="va">Daily_df</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dfList</span><span class="op">$</span><span class="va">Daily_df</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">Activity</span>, </span>
<span>       main <span class="op">=</span> <span class="va">i</span>, </span>
<span>       font.lab <span class="op">=</span> <span class="fl">2</span>,</span>
<span>       ylab <span class="op">=</span> <span class="st">"Activity (counts)"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span></code></pre></div>
<p>See the next tutorial for how to segment/export recordings by day and
how to generate graphic report.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by C. William Yao, Giorgio Varesco, Guido Simonelli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
